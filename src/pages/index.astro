---
import Layout from "../layouts/Layout.astro";
import "@/styles/globals.css";
import EntryList from "@/components/EntryList";
import { getCollection } from "astro:content";

const getSlugFromPath = (path: string): string => {
  const parts = path.split("/");
  const filename = parts.pop() || "";
  return filename.replace(".md", "");
};

let allEntries = await getCollection('posts');
const entries = allEntries
  .sort(
    (a, b) =>
      new Date(b.data.date).valueOf() -
      new Date(a.data.date).valueOf(),
  )
  .filter((p) => p.data.hidden !== true)
  .map(e => {console.log(Object.keys(e)); return e;})
  .map((entry) => ({
    slug: getSlugFromPath(entry.filePath ?? ''),
    ...entry.data,
    rawContent: entry.body ?? ""
}));
---

<Layout title="Aadish Verma" hideName={true}>
  <main class="container mx-auto py-10 lg:px-52">
    <span>
      <b>Aadish Verma</b>
      <p>
        Student at Stanford Online High School, passionate about really anything
        [but especially STEM]. Check out my <a href="/background"
          >programming background</a
        > for a few notable things I've done.
      </p>

      <p>
        Contact me!
        <br /><a href="mailto:aadish@ohs.stanford.edu">email</a>
        <br /><a href="https://github.com/aadishv" target="_blank">github</a>
      </p>

      <p>
        {"If I've built something else, you might find it"}
        <a href="/tools">here</a>
        {"or in my blog/projects â†“"}
      </p>
    </span>

    <!-- divider -->
    <hr class="my-4" />

    <EntryList entries={entries} client:load />
  </main>
</Layout>
