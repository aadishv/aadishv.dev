---
import Layout from "../layouts/Layout.astro";
import "@/styles/globals.css";
import { getCollection } from "astro:content";
import { Badge } from "@/components/ui/badge";
const getSlugFromPath = (path: string): string => {
  const parts = path.split("/");
  const filename = parts.pop() || "";
  return filename.replace(".md", "");
};
function formatDate(dateString: string) {
  try {
    return new Date(dateString).toLocaleDateString(undefined, {
      year: "numeric",
      month: "long",
      day: "numeric",
    });
  } catch {
    return dateString;
  }
}
let allEntries = await getCollection("posts");
const entries = allEntries
  .sort(
    (a, b) => new Date(b.data.date).valueOf() - new Date(a.data.date).valueOf(),
  )
  .filter((p) => p.data.hidden !== true);
---

<Layout title="Aadish Verma" hideName={true}>
  <main class="container mx-auto py-10 lg:px-52">
    <span>
      <b>Aadish Verma</b>
      <p>
        Student at Stanford Online High School, passionate about really anything
        [but especially STEM]. Check out my <a href="/background"
          >programming background</a
        > for a few notable things I've done.
      </p>

      <p>
        Contact me!
        <br /><a href="mailto:aadish@ohs.stanford.edu">email</a>
        <br /><a href="https://github.com/aadishv" target="_blank">github</a>
      </p>

      <p>
        {"If I've built something else, you might find it"}
        <a href="/tools">here</a>
        {"or in my blog/projects â†“"}
      </p>
    </span>

    <!-- divider -->
    <hr class="my-4" />

    <!-- <EntryList entries={entries} client:load /> -->
    <ul id="entries-list" class="space-y-6">
      {
        entries.map((entry) => (
          <div>
            <a
              href={"/" + getSlugFromPath(entry.filePath ?? "")}
              class="text-xl decoration-none aadish-none"
            >
              <span class="underline hover:decoration-none">
                {entry.data.title}
              </span>
              {entry.data.categories.map((c: string) => (
                <Badge variant="outline" className="ml-2 font-normal">
                  {c}
                </Badge>
              ))}
            </a>
            <time class="block" datetime={entry.data.date}>{formatDate(entry.data.date)}</time>
            {entry.data.description && (
              <p class="text-sm text-muted-foreground line-clamp-3">
                {entry.data.description}
              </p>
            )}
          </div>
        ))
      }
    </ul>
  </main>
</Layout>
